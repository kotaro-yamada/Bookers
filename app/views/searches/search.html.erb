<div class="container">
 <div class="row">

<%# 検索フォーム%>
  <% if user_signed_in? %>
    <%= form_tag(search_path, method: :get) do%>
      <%= text_field_tag (:word) %>
      <%= select_tag 'range', options_for_select([['User', '1'], ['Book', '2']]) %>
      <%= select_tag 'search', options_for_select([["完全一致", "perfect_match"], ["前方一致", "forward_match"], ["後方一致", "backward_match"], ["部分一致", "partial_match"]])%>
      <%= submit_tag "検索" %>
    <% end %>
  <% end %>
</div>
<%# 検索結果一覧%>
<div class="row">
	<% if @range == '2' %>
<div>
  <h2>Books search for <%= @word %></h2>
  <table class="table-hover table table-sm">
  	<tr>
  		<th></th>
  		<th>Title</th>
  		<th>Opinion</th>
  	</tr>
    <% @books.each do |book| %>
    <tr>
    	<td><%= link_to user_path(book.user) do %>
            <%= attachment_image_tag book.user, :profile_image, :fill, 60, 60, format: 'jpeg', class: "img-circle profile-img", fallback: "no_image.jpg" %><br>
            <% end %>
        </td>
        <td><%= book.title %></td>
        <td><%= book.body %></td> 	
    </tr>
    <% end %>
  </table>
</div>

    <% else %>
    <div>
  <h2>Users search for <%= @word %></h2>
  <table class="table-hover table table-sm">
  	<tr>
  		<th></th>
  		<th>Name</th>
  		<th>Introduction</th>
  	</tr>
    <% @users.each do |user| %>
    <tr>
    	<td><%= link_to user_path(user) do %>
            <%= attachment_image_tag user, :profile_image, :fill, 60, 60, format: 'jpeg', class: "img-circle profile-img", fallback: "no_image.jpg" %><br>
            <% end %>
        </td>
        <td><%= user.name %></td>
        <td><%= user.introduction %></td> 	
    </tr>
    <% end %>
  </table>
</div>

    <% end %>
</div>

</div>